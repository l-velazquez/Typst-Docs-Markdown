# Version 0.9.0 (October 31, 2023)

## Bibliography management

- New bibliography engine based on [CSL](https://citationstyles.org/)
  (Citation Style Language). Ships with about 100 commonly used citation
  styles and can load custom `.csl` files.
- Added new [`form`](/reference/model/cite/#parameters-form) argument to
  the `cite` function to produce different forms of citations (e.g. for
  producing a citation suitable for inclusion in prose)
- The [`cite`](/reference/model/cite/ "`cite`") function now takes only
  a single label/key instead of allowing multiple. Adjacent citations
  are merged and formatted according to the citation style's rules
  automatically. This works both with the reference syntax and explicit
  calls to the `cite` function. **(Breaking change)**
- The `cite` function now takes a
  [label](/reference/foundations/label/ "label") instead of a string
  **(Breaking change)**
- Added [`full`](/reference/model/bibliography/#parameters-full)
  argument to bibliography function to print the full bibliography even
  if not all works were cited
- Bibliography entries can now contain Typst equations (wrapped in
  <span class="typ-math-delim">`$`</span>`..`<span class="typ-math-delim">`$`</span>
  just like in markup), this works both for `.yaml` and `.bib`
  bibliographies
- The hayagriva YAML format was improved. See its
  [changelog](https://github.com/typst/hayagriva/blob/main/CHANGELOG.md)
  for more details. **(Breaking change)**
- A few bugs with `.bib` file parsing were fixed
- Removed `brackets` argument of `cite` function in favor of `form`

## Visualization

- Gradients and colors (thanks to [@Dherse](https://github.com/Dherse))
  - Added support for [gradients](/reference/visualize/gradient/) on
    shapes and text
  - Supports linear, radial, and conic gradients
  - Added support for defining colors in more color spaces, including
    [Oklab](/reference/visualize/color/#definitions-oklab), [Linear
    RGB(A)](/reference/visualize/color/#definitions-linear-rgb),
    [HSL](/reference/visualize/color/#definitions-hsl), and
    [HSV](/reference/visualize/color/#definitions-hsv)
  - Added
    [`saturate`](/reference/visualize/color/#definitions-saturate),
    [`desaturate`](/reference/visualize/color/#definitions-desaturate),
    and [`rotate`](/reference/visualize/color/#definitions-rotate)
    functions on colors
  - Added
    [`color.map`](/reference/visualize/color/#predefined-color-maps)
    module with predefined color maps that can be used with gradients
  - Rename `kind` function on colors to
    [`space`](/reference/visualize/color/#definitions-space)
  - Removed `to-rgba`, `to-cmyk`, and `to-luma` functions in favor of a
    new
    [`components`](/reference/visualize/color/#definitions-components)
    function
- Improved rendering of [rectangles](/reference/visualize/rect/) with
  corner radius and varying stroke widths
- Added support for properly clipping
  [boxes](/reference/layout/box/#parameters-clip) and
  [blocks](/reference/layout/block/#parameters-clip) with a border
  radius
- Added `background` parameter to
  [`overline`](/reference/text/overline/ "`overline`"),
  [`underline`](/reference/text/underline/ "`underline`"), and
  [`strike`](/reference/text/strike/ "`strike`") functions
- Fixed inaccurate color embedding in PDFs
- Fixed ICC profile handling for images embedded in PDFs

## Text and Layout

- Added support for automatically adding proper
  [spacing](/reference/text/text/#parameters-cjk-latin-spacing) between
  CJK and Latin text (enabled by default)
- Added support for automatic adjustment of more CJK punctuation
- Added [`quote`](/reference/model/quote/ "`quote`") element for
  inserting inline and block quotes with optional attributions
- Added [`raw.line`](/reference/text/raw/#definitions-line) element for
  customizing the display of individual lines of raw text, e.g. to add
  line numbers while keeping proper syntax highlighting
- Added support for per-side
  [inset](/reference/model/table/#parameters-inset) customization to
  table function
- Added Hungarian and Romanian translations
- Added support for Czech hyphenation
- Added support for setting custom [smart
  quotes](/reference/text/smartquote/)
- The default [figure
  separator](/reference/model/figure/#definitions-caption-separator) now
  reacts to the currently set language and region
- Improved line breaking of links / URLs (especially helpful for
  bibliographies with many URLs)
- Improved handling of consecutive hyphens in justification algorithm
- Fixed interaction of justification and hanging indent
- Fixed a bug with line breaking of short lines without spaces when
  justification is enabled
- Fixed font fallback for hyphen generated by hyphenation
- Fixed handling of word joiner and other no-break characters during
  hyphenation
- Fixed crash when hyphenating after an empty line
- Fixed line breaking of composite emoji like üè≥Ô∏è‚Äçüåà
- Fixed missing text in some SVGs
- Fixed font fallback in SVGs
- Fixed behavior of [`to`](/reference/layout/pagebreak/#parameters-to)
  argument on `pagebreak` function
- Fixed
  <span class="typ-key">`set`</span>` `<span class="typ-func">`align`</span><span class="typ-punct">`(`</span><span class="typ-op">`..`</span><span class="typ-punct">`)`</span>
  for equations
- Fixed spacing around [placed](/reference/layout/place/) elements
- Fixed coalescing of
  [`above`](/reference/layout/block/#parameters-above) and
  [`below`](/reference/layout/block/#parameters-below) spacing if given
  in em units and the font sizes differ
- Fixed handling of `extent` parameter of
  [`underline`](/reference/text/underline/ "`underline`"),
  [`overline`](/reference/text/overline/ "`overline`"), and
  [`strike`](/reference/text/strike/ "`strike`") functions
- Fixed crash for [floating placed
  elements](/reference/layout/place/#parameters-float) with no specified
  vertical alignment
- Partially fixed a bug with citations in footnotes

## Math

- Added `gap` argument for [`vec`](/reference/math/vec/#parameters-gap),
  [`mat`](/reference/math/mat/#parameters-gap), and
  [`cases`](/reference/math/cases/#parameters-gap) function
- Added `size` argument for [`abs`](/reference/math/lr/#functions-abs),
  [`norm`](/reference/math/lr/#functions-norm),
  [`floor`](/reference/math/lr/#functions-floor),
  [`ceil`](/reference/math/lr/#functions-ceil), and
  [`round`](/reference/math/lr/#functions-round) functions
- Added [`reverse`](/reference/math/cases/#parameters-reverse) parameter
  to cases function
- Added support for multinomial coefficients to
  [`binom`](/reference/math/binom/) function
- Removed `rotation` argument on [`cancel`](/reference/math/cancel/)
  function in favor of a new and more flexible `angle` argument
  **(Breaking change)**
- Added `wide` constant, which inserts twice the spacing of `quad`
- Added `csch` and `sech` [operators](/reference/math/op/)
- `‚Üº`, `‚áÄ`, `‚Üî`, and `‚ü∑` can now be used as
  [accents](/reference/math/accent/)
- Added `integral.dash`, `integral.dash.double`, and `integral.slash`
  [symbols](/reference/symbols/sym/)
- Added support for specifying negative indices for
  [augmentation](/reference/math/mat/#parameters-augment) lines to
  position the line from the back
- Fixed default color of matrix
  [augmentation](/reference/math/mat/#parameters-augment) lines
- Fixed attachment of primes to inline expressions
- Math content now respects the text
  [baseline](/reference/text/text/#parameters-baseline) setting

## Performance

- Fixed a bug related to show rules in templates which would effectively
  disable incremental compilation in affected documents
- Micro-optimized code in several hot paths, which brings substantial
  performance gains, in particular in incremental compilations
- Improved incremental parsing, which affects the whole incremental
  compilation pipeline
- Added support for incremental parsing in the CLI
- Added support for incremental SVG encoding during PDF export, which
  greatly improves export performance for documents with many SVG

## Tooling and Diagnostics

- Improved autocompletion for variables that are in-scope
- Added autocompletion for package imports
- Added autocompletion for [labels](/reference/foundations/label/)
- Added tooltip that shows which variables a function captures (when
  hovering over the equals sign or arrow of the function)
- Diagnostics are now deduplicated
- Improved diagnostics when trying to apply unary `+` or `-` to types
  that only support binary `+` and `-`
- Error messages now state which label or citation key isn't present in
  the document or its bibliography
- Fixed a bug where function argument parsing errors were shadowed by
  function execution errors (e.g. when trying to call
  [`array.sorted`](/reference/foundations/array/#definitions-sorted) and
  passing the key function as a positional argument instead of a named
  one).

## Export

- Added support for configuring the document's creation
  [`date`](/reference/model/document/#parameters-date). If the `date` is
  set to <span class="typ-key">`auto`</span> (the default), the PDF's
  creation date will be set to the current date and time.
- Added support for configuring document
  [`keywords`](/reference/model/document/#parameters-keywords)
- Generated PDFs now contain PDF document IDs
- The PDF creator tool metadata now includes the Typst version

## Web app

- Added version picker to pin a project to an older compiler version
  (with support for Typst 0.6.0+)
- Fixed desyncs between editor and compiler and improved overall
  stability
- The app now continues to highlight the document when typing while the
  document is being compiled

## Command line interface

- Added support for discovering fonts through fontconfig
- Now clears the screen instead of resetting the terminal
- Now automatically picks correct file extension for selected output
  format
- Now only regenerates images for changed pages when using `typst watch`
  with PNG or SVG export

## Miscellaneous Improvements

- Added [`version`](/reference/foundations/version/ "`version`") type
  and `sys.version` constant specifying the current compiler version.
  Can be used to gracefully support multiple versions.
- The U+2212 MINUS SIGN is now used when displaying a numeric value, in
  the [`repr`](/reference/foundations/repr/ "`repr`") of any numeric
  value and to replace a normal hyphen in text mode when before a digit.
  This improves, in particular, how negative integer values are
  displayed in math mode.
- Added support for specifying a default value instead of failing for
  `remove` function in
  [array](/reference/foundations/array/#definitions-remove) and
  [dictionary](/reference/foundations/dictionary/#definitions-remove)
- Simplified page setup guide examples
- Switched the documentation from using the word "hashtag" to the word
  "hash" where appropriate
- Added support for
  [`array.zip`](/reference/foundations/array/#definitions-zip) without
  any further arguments
- Fixed crash when a plugin tried to read out of bounds memory
- Fixed crashes when handling infinite
  [lengths](/reference/layout/length/)
- Fixed introspection (mostly bibliography) bugs due to weak page break
  close to the end of the document

## Development

- Extracted `typst::ide` into separate `typst_ide` crate
- Removed a few remaining `'static` bounds on `&dyn World`
- Removed unnecessary dependency, which reduces the binary size
- Fixed compilation of `typst` by itself (without `typst-library`)
- Fixed warnings with Nix flake when using `lib.getExe`

## Contributors
